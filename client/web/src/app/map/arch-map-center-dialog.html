<md-dialog style="width: 500px">
  <md-content>
    <md-subheader class="md-sticky-no-effect">{{'CHOOSE_CENTER' | translate}}</md-subheader>
    <p>{{'THE_FIRST_STEP_IS_TO_DETERMINE_THE_CENTER_OF_THE_MAP' | translate}}</p>
    <md-tabs md-selected="selectedTab">
      <md-tab>
        {{'BY_GPS' | translate}}
      </md-tab>
      <md-tab>
        {{'GIVING_A_LOCATION' | translate}}
      </md-tab>
    </md-tabs>
    <div style="min-height: 300px">
      <ng-form name="chooseCenterForm">
        <ng-switch on="selectedTab" class="tabpanel-container">
          <div ng-switch-when="0">
            <p>{{'PLEASE_PROVIDE_GPS_COORDINATES_TO_CENTER_THE_MAP' | translate}}</p>
              <div layout="column">
                <md-input-container flex>
                  <label>{{'LATITUDE' | translate}}</label>
                  <input type="number" ng-model="center.latitude" name="latitude" min="-90" max="90" required />
                  <div ng-messages="chooseCenterForm.latitude.$error" ng-if="chooseCenterForm.latitude.$dirty">
                    <div ng-message="number">{{'MUST_BE_A_NUMBER' | translate}}</div>
                    <div ng-message="required">{{'PLEASE_PROVIDE_A_LATITUDE' | translate}}</div>
                    <div ng-message="max">{{'MAX_LATITUDE_IS_90' | translate}}</div>
                    <div ng-message="mix">{{'MIN_LATITUDE_IS_M90' | translate}}</div>
                  </div>
                </md-input-container>
                <md-input-container flex>
                  <label>{{'LONGITUDE' | translate}}</label>
                  <input type="number" ng-model="center.longitude" name="longitude" min="-180" max="180" required />
                  <div ng-messages="chooseCenterForm.longitude.$error" ng-if="chooseCenterForm.longitude.$dirty">
                    <div ng-message="number">{{'MUST_BE_A_NUMBER' | translate}}</div>
                    <div ng-message="required">{{'PLEASE_PROVIDE_A_LONGITUDE' | translate}}</div>
                    <div ng-message="max">{{'MAX_LONGITUDE_IS_180' | translate}}</div>
                    <div ng-message="mix">{{'MIN_LONGITUDE_IS_M180' | translate}}</div>
                  </div>
                </md-input-container>
              </div>
          </div>
          <div ng-switch-when="1">
            <p>{{'PLEASE_START_TYPING_THE_NAME_OF_A_LOCATION_THEN_SELECT_IT' | translate}}</p>
            <div layout layout-sm="column">
              <md-autocomplete md-selected-item="location.selected" md-search-text="location.search" md-items="item in getMatchLocations(location.search)" md-item-text="item.display_name" md-selected-item-change="extractCenter(item)" md-delay="2000" flex>
                <span md-highlight-text="location.search">{{item.display_name}}</span>
              </md-autocomplete>
              <div ng-messages="chooseCenterForm.location.$error" ng-if="chooseCenterForm.location.$dirty">
                <div ng-message="required">{{'PLEASE_PROVIDE_A_LOCATION' | translate}}</div>
              </div>
            </div>
          </div>
        </ng-switch>
      </ng-form>
    </div>
  </md-content>
  <div class="md-actions" layout="row">
    <md-button ng-click="cancel()">
      {{'CANCEL' | translate}}
    </md-button>
    <md-button ng-click="chooseCenter(center)" class="md-primary" ng-disabled="chooseCenterForm.$invalid || !hasCenter()">
      {{'CHOOSE' | translate}}
    </md-button>
  </div>
</md-dialog>
